<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="/css/Home.css"/>
    <link
            href="https://fonts.googleapis.com/css2?family=REM:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet"
    />
    <title>Home</title>
</head>
<body>
<div th:replace="Fragments/Navbar"></div>
<div id="pageContents">
    <div>
        <h1 th:text="#{home_popular_releases}"></h1>
    </div>
    <hr/>
    <div class="movieList">
        <div id="movie" th:each="movie, iterStat : ${moviesData}" th:if="${iterStat.index < 4}">
            <a th:href="@{/Movie/{id}(id=${movie.id})}">
                <img th:src="${movie.posterUrl}" alt="movie poster"/>
                <h3 th:text="${movie.title}"></h3>
                <h3 th:text="${movie.scores}"></h3>
            </a>
        </div>
    </div>
    <h1 th:text="#{home_trending_lists}"></h1>
    <hr/>
    <div id="trendingLists">
        <div class="listBox" th:each="list : ${listsData}">
            <div class="movie-grid">
                <div id="frame" th:each="movie, iter : ${list.movies}" th:if="${iter.index < 4}">
                    <img th:src="${movie.posterUrl}" alt="movie poster"/>
                </div>
            </div>
            <br/>
            <div id="listContent">
                <h4 th:text="${list.title}">List title</h4>
                <span th:text="${list.description}">List description</span>
                <a th:href="@{/CustomList/{id}(id=${list.id})}">
                    <button th:text="#{home_view_list}">View list</button>
                </a>
            </div>
        </div>
    </div>
    <h1 th:text="#{home_popular_reviews}"></h1>
    <div id="popularReviews">
        <div id="reviews">
            <hr/>
            <div class="review" th:each="review : ${reviewsData}">
                <div id="reviewTopContent">
                    <div id="poster">
                        <img
                                id="reviewMoviePoster"
                                th:src="${review.movie.posterUrl}"
                                alt="movie poster"
                        />
                        <div id="rating" th:text="${review.rating}+'/100'">Rating</div>
                        <div id="reviewButtons">
                            <form th:action="@{Home/Review/{reviewId}/like(reviewId=${review.id})}" method="post">
                                <button type="submit" class="image-button">
                                    <img src="/images/like.png" alt="Like" class="button-image"/>
                                    <span th:text="${review.likes}"></span>
                                </button>
                            </form>
                            <form th:action="@{Home/Review/{reviewId}/dislike(reviewId=${review.id})}" method="post">
                                <button type="submit" class="image-button">
                                    <img src="/images/dislike.png" alt="Dislike" class="button-image"/>
                                </button>
                            </form>
                        </div>
                    </div>
                    <div id="reviewTextContent">
                        <h1>
                            <span th:text="${review.reviewTitle}"></span>
                            <span> by: </span>
                            <a th:href="@{/User/{id}(id=${review.user.id})}" th:text="${review.user.username}"></a>
                        </h1>
                        <div id="reviewText" th:text="${review.reviewText}">Review text</div>
                        <div id="comments">
                            <div th:each="comment : ${review.comments}">
                                <div id="comment">
                                    <a th:href="@{/User/comment.user.id}">
                                        <strong th:text="${comment.user.username}">Username</strong>
                                    </a>
                                    <br/>
                                    <p th:text="${comment.text}">This is my comment</p>
                                    <div id="reviewButtons">
                                        <form th:action="@{Home/Comments/{commentId}/like(commentId=${comment.id})}"
                                              method="post">
                                            <button type="submit" class="image-button">
                                                <img src="/images/like.png" alt="Like" class="button-image"/>
                                                <span th:text="${comment.likes}"></span>
                                            </button>
                                        </form>
                                        <form th:action="@{Home/Comments/{commentId}/dislike(commentId=${comment.id})}"
                                              method="post">
                                            <button type="submit" class="image-button">
                                                <img src="/images/dislike.png" alt="Dislike" class="button-image"/>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="viewBtn">
        <a th:href="@{/Reviews}">
            <button id="viewMore" th:text="#{home_view_more_reviews}">View more reviews
            </button>
        </a>
    </div>
</div>
</body>
</html>
